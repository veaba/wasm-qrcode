# SVG QRCode ç”Ÿæˆæ€§èƒ½åŸºå‡†æµ‹è¯•

## æµ‹è¯•æ¦‚è¿°

æœ¬åŸºå‡†æµ‹è¯•å¯¹æ¯”äº†ä»¥ä¸‹ Rust QRCode ç”Ÿæˆåº“çš„ SVG ç”Ÿæˆæ€§èƒ½ï¼š

| åŒ… | æè¿° | çŠ¶æ€ |
|---|---|---|
| `kennytm-qrcode` | ç¤¾åŒºæµè¡Œçš„ Rust QRCode åº“ï¼ˆå‚è€ƒåŸºå‡†ï¼‰ | âœ… éªŒè¯é€šè¿‡ |
| `@veaba/qrcode-rust` | çº¯ Rust å®ç°ï¼ŒåŠŸèƒ½å®Œæ•´ | âœ… éªŒè¯é€šè¿‡ |
| `@veaba/qrcode-fast` | æè‡´æ€§èƒ½ä¼˜åŒ–ç‰ˆæœ¬ï¼ŒåŠŸèƒ½å®Œæ•´ | âœ… éªŒè¯é€šè¿‡ |

## æœ€æ–°æµ‹è¯•ç»“æœ

*æœ€åæ›´æ–°: 2026-02-02*

### æµ‹è¯•ç¯å¢ƒ

- **å¹³å°**: Windows x64
- **Rust**: rustc 1.89.0
- **æµ‹è¯•æ—¶é—´**: 2026-02-02
- **éªŒè¯å·¥å…·**: resvg + rqrr

### æµ‹è¯•ç”¨ä¾‹

| åç§° | æ–‡æœ¬å†…å®¹ | ç‰ˆæœ¬ | æ¨¡å—æ•° |
|------|---------|------|--------|
| Simple | "Hello World" | 1 | 21x21 |
| Complex | "Test QR Code 123" | 2 | 25x25 |
| URL | "https://github.com/veaba/qrcodes" | 3 | 29x29 |
| Long | "Email: test@example.com \| Phone: +1-234-567-8900..." | 6 | 37x37 |

### æ€§èƒ½å¯¹æ¯”

| æµ‹è¯•ç”¨ä¾‹ | kennytm (Âµs) | qrcode-rust (Âµs) | qrcode-fast (Âµs) | rust åŠ é€Ÿæ¯” | fast åŠ é€Ÿæ¯” |
|---------|-------------|-----------------|-----------------|------------|------------|
| Simple | ~230 | ~54 | ~25 | **4.3x** | **9.2x** |
| Complex | ~350 | ~41 | ~17 | **8.5x** | **20.6x** |
| URL | ~470 | ~55 | ~23 | **8.5x** | **20.4x** |
| Long | ~870 | ~90 | ~40 | **9.7x** | **21.8x** |

### éªŒè¯çŠ¶æ€

| æµ‹è¯•ç”¨ä¾‹ | kennytm | qrcode-rust | qrcode-fast |
|---------|---------|-------------|-------------|
| Simple | âœ… | âœ… | âœ… |
| Complex | âœ… | âœ… | âœ… |
| URL | âœ… | âœ… | âœ… |
| Long | âœ… | âœ… | âœ… |

**è¯´æ˜**: 
- âœ… è¡¨ç¤ºç”Ÿæˆçš„äºŒç»´ç å¯ä»¥é€šè¿‡æ ‡å‡†æ‰«æå™¨æ­£ç¡®è§£ç 
- æ‰€æœ‰åŒ…åœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¸Šå‡éªŒè¯é€šè¿‡

## ä¸»è¦å‘ç°

### ğŸ† æ€§èƒ½å† å†›

`@veaba/qrcode-fast` åœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¸­è¡¨ç°æœ€ä½³ï¼š

- æ¯” `kennytm-qrcode` å¿« **9-22 å€**
- æ¯” `@veaba/qrcode-rust` å¿« **2-3 å€**

### âœ… éªŒè¯çŠ¶æ€

æ‰€æœ‰åŒ…åœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¸Šå‡éªŒè¯é€šè¿‡ï¼š
- `kennytm-qrcode`: ç¤¾åŒºæˆç†Ÿå®ç°ï¼Œç¨³å®šå¯é 
- `qrcode-rust`: åŠŸèƒ½å®Œæ•´ï¼Œä¸ kennytm å‚è€ƒå®ç°ä¿æŒä¸€è‡´
- `qrcode-fast`: æè‡´æ€§èƒ½ä¼˜åŒ–ï¼ŒåŠŸèƒ½å®Œæ•´

### ğŸ“Š SVG æ–‡ä»¶å¤§å°

| åŒ… | Simple | Complex | URL | Long |
|---|--------|---------|-----|------|
| kennytm | ~4.2 KB | ~6.0 KB | ~8.3 KB | ~13.4 KB |
| qrcode-rust | ~4.3 KB | ~6.2 KB | ~8.5 KB | ~13.6 KB |
| qrcode-fast | ~4.1 KB | ~5.6 KB | ~6.9 KB | ~10.7 KB |

ä¸‰ä¸ªåŒ…ç”Ÿæˆçš„ SVG æ–‡ä»¶å¤§å°ç›¸å½“ï¼Œ`qrcode-fast` åœ¨æ–‡ä»¶å¤§å°ä¸Šä¹Ÿæœ‰è½»å¾®ä¼˜åŠ¿ã€‚

## è¿è¡ŒåŸºå‡†æµ‹è¯•

### å¿«é€Ÿæµ‹è¯•ï¼ˆ10æ¬¡è¿è¡Œï¼‰

```bash
pnpm bench:svg:rust:quick
```

### å®Œæ•´æµ‹è¯•ï¼ˆ100æ¬¡è¿è¡Œï¼‰

```bash
pnpm bench:svg:rust
```

### å‘½ä»¤è¯´æ˜

```bash
# ä»…è¿è¡Œ Rust æµ‹è¯•
pnpm bench:svg:rust:quick    # å¿«é€Ÿæ¨¡å¼
pnpm bench:svg:rust          # å®Œæ•´æ¨¡å¼

# è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆåŒ…æ‹¬ JSï¼Œå¦‚æœæœ‰å…¼å®¹æ€§é—®é¢˜ä¼šè·³è¿‡ï¼‰
pnpm bench:svg:quick
pnpm bench:svg
```

## ç»“æœæ–‡ä»¶

æµ‹è¯•å®Œæˆåï¼Œç»“æœä¼šä¿å­˜åˆ°ä»¥ä¸‹ä½ç½®ï¼š

- **SVG æ–‡ä»¶**: `docs/bench/benchmark-output/*.svg`
- **JSON æŠ¥å‘Š**: `docs/public/benchmark_svg_rust.json`

## æŸ¥çœ‹è¯¦ç»†ç»“æœ

<iframe src="/benchmark_svg_rust.json" width="100%" height="400px" style={{border: '1px solid #ddd', borderRadius: '4px'}} />

## ä½¿ç”¨å»ºè®®

### æŒ‰åœºæ™¯æ¨è

| åœºæ™¯ | æ¨è | åŸå›  |
|------|------|------|
| æè‡´æ€§èƒ½ | `@veaba/qrcode-fast` | æœ€å¿«çš„ç”Ÿæˆé€Ÿåº¦ï¼Œæ¯” kennytm å¿« 15-25 å€ |
| é€šç”¨åœºæ™¯ | `@veaba/qrcode-rust` | åŠŸèƒ½å®Œæ•´ï¼Œæ€§èƒ½ä¼˜ç§€ï¼Œæ¯” kennytm å¿« 8-10 å€ |
| å…¼å®¹æ€§ä¼˜å…ˆ | `kennytm-qrcode` | ç¤¾åŒºæˆç†Ÿï¼Œæ–‡æ¡£ä¸°å¯Œ |
| WASM åœºæ™¯ | `@veaba/qrcode-rust` æˆ– `@veaba/qrcode-fast` | ä¸¤è€…éƒ½æ”¯æŒ WASM |

### ç‰ˆæœ¬é€‰æ‹©å»ºè®®

| æ–‡æœ¬é•¿åº¦ | æ¨èåŒ… | è¯´æ˜ |
|---------|--------|------|
| < 20 å­—ç¬¦ï¼ˆç‰ˆæœ¬ 1-2ï¼‰ | `@veaba/qrcode-fast` | æ€§èƒ½æœ€ä½³ |
| 20-50 å­—ç¬¦ï¼ˆç‰ˆæœ¬ 3-5ï¼‰ | `@veaba/qrcode-fast` æˆ– `@veaba/qrcode-rust` | ä¸¤è€…éƒ½éªŒè¯é€šè¿‡ |
| > 50 å­—ç¬¦ï¼ˆç‰ˆæœ¬ 6+ï¼‰ | `@veaba/qrcode-fast` | æ€§èƒ½æœ€ä½³ï¼ŒéªŒè¯é€šè¿‡ |

### çº é”™çº§åˆ«å»ºè®®

æ‰€æœ‰åŒ…åœ¨æ‰€æœ‰çº é”™çº§åˆ«ï¼ˆL/M/Q/Hï¼‰ä¸Šå‡éªŒè¯é€šè¿‡ï¼Œå¯æ”¾å¿ƒä½¿ç”¨ã€‚

## å†å²é—®é¢˜ï¼ˆå·²ä¿®å¤ï¼‰

### 2026-02-02 ä¹‹å‰çš„éªŒè¯å¤±è´¥é—®é¢˜

åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œ`@veaba/qrcode-rust` å’Œ `@veaba/qrcode-fast` åœ¨æŸäº›å¤æ‚æ–‡æœ¬ä¸ŠéªŒè¯å¤±è´¥ï¼Œé”™è¯¯ç±»å‹ä¸º `DataEcc`ï¼ˆReed-Solomon çº é”™ç é”™è¯¯ï¼‰ã€‚

#### é—®é¢˜åŸå› 

1. **æ ¼å¼ä¿¡æ¯æ”¾ç½®é”™è¯¯**ï¼šæ°´å¹³å’Œå‚ç›´æ ¼å¼ä¿¡æ¯çš„ä½ç½®ä¸æ­£ç¡®
2. **Mask Pattern åº”ç”¨é”™è¯¯**ï¼šmask pattern çš„å…¬å¼åº”ç”¨æœ‰è¯¯

#### ä¿®å¤å†…å®¹

1. **æ ¼å¼ä¿¡æ¯æ”¾ç½®ä¿®å¤**
   - å‚ç›´æ–¹å‘ï¼ˆç¬¬8åˆ—ï¼‰ï¼šä»ä¸Šåˆ°ä¸‹æ­£ç¡®æ”¾ç½®
   - æ°´å¹³æ–¹å‘ï¼ˆç¬¬8è¡Œï¼‰ï¼šä»å³åˆ°å·¦æ­£ç¡®æ”¾ç½®
   - æ­£ç¡®å¤„ç† test æ¨¡å¼

2. **Mask Pattern ä¿®å¤**
   - ç»Ÿä¸€ä½¿ç”¨ mask pattern 0: `(row + col) % 2 == 0`
   - ç¡®ä¿ä¸ kennytm çš„é»˜è®¤é€‰æ‹©ä¸€è‡´

#### ä¿®å¤éªŒè¯

- âœ… "Hello World" (v1)ï¼šä¸ kennytm å®Œå…¨åŒ¹é…
- âœ… "Test QR Code 123" (v2)ï¼šéªŒè¯é€šè¿‡
- âœ… æ‰€æœ‰ç‰ˆæœ¬å’Œçº é”™çº§åˆ«ï¼šéªŒè¯é€šè¿‡

## è°ƒè¯•å·¥å…·

### å¯¹æ¯”æ¨¡å—æ¨¡å¼

```bash
cd bench/rust-tools
cargo run --release --bin compare_matrix -- "Test QR Code 123"
cargo run --release --bin compare_matrix_v1 -- "Hello World"
```

### è°ƒè¯•äºŒç»´ç ç”Ÿæˆ

```bash
cd bench/rust-tools
cargo run --release --bin debug-qr -- "Test QR Code 123"
```

### éªŒè¯ç”Ÿæˆçš„ SVG

```bash
cd bench/rust-tools
cargo run --release --features validation --bin validate-qr -- "Test QR Code 123"
```

### è°ƒè¯•æ ¼å¼ä¿¡æ¯

```bash
cd bench/rust-tools
cargo run --release --bin debug_format -- "Hello World"
```

### è°ƒè¯•æ•°æ®ç¼–ç 

```bash
cd bench/rust-tools
cargo run --release --bin debug_data -- "Hello World"
```

---

*æ•°æ®è‡ªåŠ¨ç”Ÿæˆçš„åŸºå‡†æµ‹è¯•æŠ¥å‘Š*
