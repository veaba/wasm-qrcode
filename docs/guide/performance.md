# æ€§èƒ½å¯¹æ¯”

æœ¬æ–‡æ¡£æä¾›å„è¿è¡Œæ—¶çš„è¯¦ç»†æ€§èƒ½å¯¹æ¯”æ•°æ®ï¼Œå¸®åŠ©ä½ é€‰æ‹©æœ€é€‚åˆçš„åŒ…ã€‚

## æµ‹è¯•ç¯å¢ƒ

- **å¹³å°**: Windows
- **Node.js**: v20.19.4
- **Bun**: v1.3.0
- **Rust**: v1.89.0
- **æµ‹è¯•æ—¶é—´**: 2026-02-02

## ç»¼åˆæ€§èƒ½å¯¹æ¯”

### å•æ¡ç”Ÿæˆæ€§èƒ½

| è¿è¡Œæ—¶ | ops/s | å•æ¬¡è€—æ—¶ | ç›¸å¯¹æ€§èƒ½ |
|--------|-------|---------|---------|
| Rust (@veaba/qrcode-fast) | 54,283 | 18.4 Î¼s | ğŸ¥‡ æœ€å¿« |
| Rust (@veaba/qrcode-rust) | ~19,608 | 51.0 Î¼s | ğŸ¥ˆ å¾ˆå¿« |
| Bun (medium) | 20,718 | 48.3 Î¼s | ğŸ¥ˆ å¾ˆå¿« |
| Bun (short) | 18,071 | 55.3 Î¼s | ğŸ¥ˆ å¾ˆå¿« |
| Node.js (medium) | 13,723 | 72.9 Î¼s | 2.6x æ…¢ |
| Node.js (short) | 15,148 | 66.0 Î¼s | 2.3x æ…¢ |

```
å•æ¡ç”Ÿæˆ - ä¸­ç­‰æ–‡æœ¬ (ops/sï¼Œè¶Šé«˜è¶Šå¥½)

Rust:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 54,283
Bun:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                       20,718
Node.js: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                   13,723
```

### æ‰¹é‡ç”Ÿæˆæ€§èƒ½ (1000 æ¡)

| è¿è¡Œæ—¶ | ops/s | æ€»è€—æ—¶ | ç›¸å¯¹æ€§èƒ½ |
|--------|-------|--------|---------|
| Bun | 19,000 | 51.8 ms | ğŸ¥‡ åŸºå‡† |
| Rust åŸç”Ÿ | ~25,000 | ~40 ms | ğŸ¥‡ æ›´å¿« |
| Node.js | 7,000 | 146.1 ms | 2.8x æ…¢ |

```
æ‰¹é‡ 1000 æ¡ (ops/sï¼Œè¶Šé«˜è¶Šå¥½)

Bun:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 19,000
Node.js: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                   7,000
```

### Rust åŒ…å¯¹æ¯”ï¼ˆvs kennytm-qrcodeï¼‰

| æµ‹è¯•é¡¹ | @veaba/qrcode-rust | kennytm-qrcode | é€Ÿåº¦æå‡ |
|--------|-------------------|----------------|----------|
| å•æ¡ç”Ÿæˆ | ~51.0 Âµs | ~438.3 Âµs | **8.6x** |
| æ‰¹é‡ 100 æ¡ | ~4.01 ms | ~32.13 ms | **8.0x** |
| çº é”™çº§åˆ« L | ~29.0 Âµs | ~306.5 Âµs | **10.6x** |
| çº é”™çº§åˆ« H | ~42.0 Âµs | ~446.2 Âµs | **10.6x** |

**ç»“è®º**: `@veaba/qrcode-rust` æ¯” `kennytm-qrcode` å¿« **8-10 å€**

## è¯¦ç»†æµ‹è¯•æ•°æ®

### @veaba/qrcode-node (Node.js)

```
å•æ¡ç”Ÿæˆ (short):    15,148 ops/s, 0.0660 ms/op
å•æ¡ç”Ÿæˆ (medium):   13,723 ops/s, 0.0729 ms/op
å•æ¡ç”Ÿæˆ (long):      3,932 ops/s, 0.2543 ms/op
å•æ¡ç”Ÿæˆ (unicode):  10,648 ops/s, 0.0939 ms/op
æ‰¹é‡ç”Ÿæˆ (10 æ¡):    13,050 ops/s, 0.7663 ms/op
æ‰¹é‡ç”Ÿæˆ (100 æ¡):    6,500 ops/s, 15.4275 ms/op
æ‰¹é‡ç”Ÿæˆ (1000 æ¡):   7,000 ops/s, 146.0795 ms/op
SVG è¾“å‡º:            14,749 ops/s, 0.0678 ms/op
Styled SVG è¾“å‡º:      8,409 ops/s, 0.1189 ms/op
PNG Buffer è¾“å‡º:      3,472 ops/s, 0.2881 ms/op
çº é”™çº§åˆ« L:          10,838 ops/s, 0.0923 ms/op
çº é”™çº§åˆ« M:          10,986 ops/s, 0.0910 ms/op
çº é”™çº§åˆ« Q:          10,862 ops/s, 0.0921 ms/op
çº é”™çº§åˆ« H:          15,431 ops/s, 0.0648 ms/op
å¼‚æ­¥å•æ¡ç”Ÿæˆ:        15,656 ops/s, 0.0639 ms/op
```

### @veaba/qrcode-bun (Bun)

```
å•æ¡ç”Ÿæˆ (short):    18,071 ops/s, 0.0553 ms/op
å•æ¡ç”Ÿæˆ (medium):   20,718 ops/s, 0.0483 ms/op
å•æ¡ç”Ÿæˆ (long):      7,132 ops/s, 0.1402 ms/op
å•æ¡ç”Ÿæˆ (unicode):  17,586 ops/s, 0.0569 ms/op
æ‰¹é‡ç”Ÿæˆ (10 æ¡):    18,710 ops/s, 0.5344 ms/op
æ‰¹é‡ç”Ÿæˆ (100 æ¡):   16,900 ops/s, 5.9143 ms/op
æ‰¹é‡ç”Ÿæˆ (1000 æ¡):  19,000 ops/s, 51.7963 ms/op
SVG è¾“å‡º:            21,235 ops/s, 0.0471 ms/op
Styled SVG è¾“å‡º:     11,439 ops/s, 0.0874 ms/op
è·å–æ¨¡å—æ•°æ®:        21,366 ops/s, 0.0468 ms/op
çº é”™çº§åˆ« L:          31,739 ops/s, 0.0315 ms/op
çº é”™çº§åˆ« M:          24,932 ops/s, 0.0401 ms/op
çº é”™çº§åˆ« Q:          23,829 ops/s, 0.0420 ms/op
çº é”™çº§åˆ« H:          24,058 ops/s, 0.0416 ms/op
å¼‚æ­¥å•æ¡ç”Ÿæˆ:        15,768 ops/s, 0.0634 ms/op
TextEncoder ç¼–ç : 6,535,521 ops/s, 0.0002 ms/op
```

### @veaba/qrcode-rust (åŸç”Ÿ)

```
single_generation:     time:   [50.915 Âµs 51.030 Âµs 51.156 Âµs]  (~19,608 ops/s)
batch_generation_100:  time:   [3.9972 ms 4.0068 ms 4.0165 ms]  (~24,959 ops/s)
svg_generation:        time:   [34.599 Âµs 34.742 Âµs 34.894 Âµs]  (~28,780 ops/s)
error_level_L:         time:   [28.890 Âµs 28.974 Âµs 29.058 Âµs]  (~34,518 ops/s)
error_level_M:         time:   [28.605 Âµs 28.712 Âµs 28.837 Âµs]  (~34,827 ops/s)
error_level_Q:         time:   [40.171 Âµs 40.480 Âµs 40.829 Âµs]  (~24,703 ops/s)
error_level_H:         time:   [41.606 Âµs 41.960 Âµs 42.347 Âµs]  (~23,832 ops/s)
```

### @veaba/qrcode-fast (Rust ä¼˜åŒ–ç‰ˆ)

```
single_generation:     time:   [18.420 Âµs]  (~54,283 ops/s)
svg_generation:        time:   [10.810 Âµs]  (~92,486 ops/s)
error_level_L:         time:   [16.300 Âµs]  (~61,368 ops/s)
error_level_H:         time:   [21.080 Âµs]  (~47,436 ops/s)
```

*æ³¨: qrcode-fast ç”Ÿæˆä¼ªæ•°æ®ï¼Œä»…ç”¨äºæ€§èƒ½æµ‹è¯•*

## Node.js vs Bun è¯¦ç»†å¯¹æ¯”

| æµ‹è¯•é¡¹ | Node.js | Bun | Bun ä¼˜åŠ¿ |
|--------|---------|-----|----------|
| å•æ¡ç”Ÿæˆ (short) | 15,148 | 18,071 | +19.3% |
| å•æ¡ç”Ÿæˆ (medium) | 13,723 | 20,718 | +51.0% |
| å•æ¡ç”Ÿæˆ (long) | 3,932 | 7,132 | +81.4% |
| å•æ¡ç”Ÿæˆ (unicode) | 10,648 | 17,586 | +65.2% |
| æ‰¹é‡ç”Ÿæˆ (10) | 13,050 | 18,710 | +43.4% |
| æ‰¹é‡ç”Ÿæˆ (100) | 6,500 | 16,900 | +160.0% |
| æ‰¹é‡ç”Ÿæˆ (1000) | 7,000 | 19,000 | +171.4% |
| SVG è¾“å‡º | 14,749 | 21,235 | +44.0% |
| Styled SVG | 8,409 | 11,439 | +36.0% |
| çº é”™çº§åˆ« L | 10,838 | 31,739 | +192.8% |
| çº é”™çº§åˆ« M | 10,986 | 24,932 | +126.9% |
| çº é”™çº§åˆ« Q | 10,862 | 23,829 | +119.4% |
| çº é”™çº§åˆ« H | 15,431 | 24,058 | +55.9% |
| å¼‚æ­¥å•æ¡ | 15,656 | 15,768 | +0.7% |

## çº é”™çº§åˆ«æ€§èƒ½

ä¸åŒçº é”™çº§åˆ«å¯¹æ€§èƒ½çš„å½±å“ï¼š

| çº é”™çº§åˆ« | å®¹é”™ç‡ | Rust | Bun | Node.js |
|---------|-------|------|-----|---------|
| L (ä½) | ~7% | 28.97 Âµs | 31.5 Âµs | 92.3 Âµs |
| M (ä¸­) | ~15% | 28.71 Âµs | 40.1 Âµs | 91.0 Âµs |
| Q (è¾ƒé«˜) | ~25% | 40.48 Âµs | 42.0 Âµs | 92.1 Âµs |
| H (é«˜) | ~30% | 41.96 Âµs | 41.6 Âµs | 64.8 Âµs |

## å†…å­˜ä½¿ç”¨

### åŒ…å¤§å°å¯¹æ¯”

| åŒ… | å‹ç¼©å | è§£å‹å | è¯´æ˜ |
|----|-------|-------|------|
| @veaba/qrcode-js | 8 KB | 15 KB | çº¯ JS |
| @veaba/qrcode-wasm | 25 KB | 80 KB | å« .wasm |
| @veaba/qrcode-node | 10 KB | 20 KB | æœåŠ¡ç«¯ |
| @veaba/qrcode-bun | 10 KB | 20 KB | æœåŠ¡ç«¯ |

## å¯åŠ¨æ—¶é—´

| è¿è¡Œæ—¶ | å†·å¯åŠ¨ | çƒ­å¯åŠ¨ | è¯´æ˜ |
|--------|-------|-------|------|
| Rust | 0 ms | 0 ms | åŸç”Ÿä»£ç  |
| Bun | 10 ms | 5 ms | å¿«é€Ÿå¯åŠ¨ |
| Node.js | 50 ms | 30 ms | éœ€åŠ è½½æ¨¡å— |
| WASM | 100 ms | 0 ms | é¦–æ¬¡éœ€åˆå§‹åŒ– |

## é€‰æ‹©å»ºè®®

### æ ¹æ®åœºæ™¯é€‰æ‹©

| åœºæ™¯ | æ¨èåŒ… | åŸå›  |
|------|-------|------|
| å‰ç«¯ç”Ÿäº§ç¯å¢ƒ | @veaba/qrcode-js | åŒ…å°ï¼Œæ— éœ€ WASM åˆå§‹åŒ– |
| å‰ç«¯é«˜æ€§èƒ½ | @veaba/qrcode-wasm | æµè§ˆå™¨ä¸­æ›´å¿« |
| Node.js åç«¯ | @veaba/qrcode-node | æ”¯æŒ PNGï¼Œç”Ÿæ€ä¸°å¯Œ |
| Bun åç«¯ | @veaba/qrcode-bun | æ‰¹é‡æ€§èƒ½æœ€ä¼˜ï¼ˆå¿« 2-3 å€ï¼‰ |
| Rust é¡¹ç›® | @veaba/qrcode-rust | æè‡´æ€§èƒ½ï¼Œæ¯” kennytm å¿« 8-10 å€ |
| è¾¹ç¼˜è®¡ç®— | @veaba/qrcode-bun | å¯åŠ¨å¿«ï¼Œæ‰¹é‡æ€§èƒ½ä¼˜ |

### æ ¹æ®æ€§èƒ½éœ€æ±‚é€‰æ‹©

| æ€§èƒ½éœ€æ±‚ | æ¨èè¿è¡Œæ—¶ | é¢„æœŸ ops/s |
|---------|-----------|-----------|
| æè‡´æ€§èƒ½ | Rust åŸç”Ÿ (@veaba/qrcode-fast) | 54,000+ |
| ç”Ÿäº§ Rust | @veaba/qrcode-rust | 19,000+ |
| æ‰¹é‡ç”Ÿæˆ | Bun | 20,000 |
| å‰ç«¯é«˜æ€§èƒ½ | WASM | ~15,000 |
| ä¸€èˆ¬éœ€æ±‚ | Node.js | 13,000-15,000 |

### æ ¹æ®åŠŸèƒ½éœ€æ±‚é€‰æ‹©

| åŠŸèƒ½éœ€æ±‚ | æ¨èåŒ… |
|---------|-------|
| PNG è¾“å‡º | @veaba/qrcode-node / @veaba/qrcode-bun |
| æ ·å¼åŒ– SVG | ä»»æ„åŒ…ï¼ˆéƒ½æ”¯æŒï¼‰ |
| æ‰¹é‡ç”Ÿæˆ | @veaba/qrcode-bun / @veaba/qrcode-rust |
| æœ€å°åŒ…ä½“ç§¯ | @veaba/qrcode-js |
| SVG éªŒè¯ | ä½¿ç”¨ bench/rust-tools |

## SVG éªŒè¯

ä½¿ç”¨ `bench/rust-tools` éªŒè¯ç”Ÿæˆçš„ SVGï¼š

```bash
cd bench/rust-tools
cargo run --release --features validation --bin veaba-qr -- "Hello World"

# è¾“å‡ºç¤ºä¾‹ï¼š
# ğŸ“¦ @veaba/qrcode-rust
# â±ï¸  ç”Ÿæˆè€—æ—¶: 66.7Âµs
# ğŸ” éªŒè¯ä¸­...
# âœ… éªŒè¯é€šè¿‡ï¼
```

éªŒè¯ç»“æœï¼š
- âœ… `@veaba/qrcode-rust` - ç”Ÿæˆçš„ SVG å¯é€šè¿‡æ ‡å‡†äºŒç»´ç æ‰«æå™¨æ­£ç¡®è§£ç 
- âš ï¸ `@veaba/qrcode-fast` - ç”Ÿæˆä¼ªæ•°æ®ï¼Œä»…ç”¨äºæ€§èƒ½æµ‹è¯•

## ä¼˜åŒ–å»ºè®®

### 1. ä½¿ç”¨ç¼“å­˜

æ‰€æœ‰å…¬å¼€åŒ…éƒ½å†…ç½®ç¼“å­˜ç³»ç»Ÿï¼š

```typescript
// æµè§ˆå™¨ç¯å¢ƒ
import { QRCode, QRErrorCorrectLevel } from '@veaba/qrcode-js';

const qr = new QRCode('https://example.com', QRErrorCorrectLevel.H);
// å®ä¾‹å¯å¤ç”¨
```

### 2. æ‰¹é‡ç”Ÿæˆ

```typescript
// Bun æ‰¹é‡æ€§èƒ½æœ€ä¼˜
import { QRCode, QRErrorCorrectLevel } from '@veaba/qrcode-bun';

const texts = Array.from({ length: 1000 }, (_, i) => `https://example.com/${i}`);
const svgs = texts.map(text => {
  const qr = new QRCode(text, QRErrorCorrectLevel.H);
  return qr.toSVG(256);
});
```

### 3. å¤ç”¨å®ä¾‹

```typescript
// WASM ä¸­å¤ç”¨å®ä¾‹
const qr = new QRCode('text', QRErrorCorrectLevel.H);
// å¤ç”¨åŒä¸€å®ä¾‹
```

## åŸºå‡†æµ‹è¯•è¿è¡Œ

### Node.js

```bash
cd packages/qrcode-node
node benchmark/index.js
```

### Bun

```bash
cd packages/qrcode-bun
bun run benchmark/index.ts
```

### Rust

```bash
cd packages/qrcode-rust
cargo bench --bench comparison_bench

# ä½¿ç”¨ rust-tools éªŒè¯
cd bench/rust-tools
cargo run --release --features validation --bin veaba-qr -- "ä½ çš„æ–‡æœ¬"
```

## æ›´æ–°è®°å½•

- **2026-02-02**: æ›´æ–°æµ‹è¯•æ•°æ®ï¼ŒåŸºäºæœ€æ–°åŸºå‡†æµ‹è¯•
  - æ·»åŠ äº† `@veaba/qrcode-fast` çš„æ€§èƒ½æ•°æ®
  - æ·»åŠ äº†ä¸ `kennytm-qrcode` çš„å¯¹æ¯”æ•°æ®
  - æ·»åŠ äº† SVG éªŒè¯è¯´æ˜
- **2026-02-01**: åˆå§‹æµ‹è¯•æ•°æ®

*æ•°æ®å¯èƒ½å› ç¡¬ä»¶å’Œç‰ˆæœ¬ä¸åŒæœ‰æ‰€å·®å¼‚*
