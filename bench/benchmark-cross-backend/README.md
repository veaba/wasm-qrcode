# @veaba/benchmark-cross-backend

è·¨åç«¯åŸºå‡†æµ‹è¯•å¥—ä»¶ - å¯¹æ¯” Node.js / Bun / Rust çš„ QRCode ç”Ÿæˆæ€§èƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”¥ ç»Ÿä¸€æµ‹è¯•æ ‡å‡†ï¼Œå…¬å¹³å¯¹æ¯”ä¸åŒåç«¯å®ç°
- ğŸ“Š ç”Ÿæˆè¯¦ç»†çš„æ€§èƒ½æŠ¥å‘Šå’Œå¯è§†åŒ–å›¾è¡¨
- ğŸ† è‡ªåŠ¨è¯†åˆ«å„åœºæ™¯ä¸‹çš„æœ€ä½³æ€§èƒ½å®ç°
- ğŸ’¾ æ”¯æŒç»“æœå¯¼å‡ºä¸º JSON æ ¼å¼

## æµ‹è¯•æŒ‡æ ‡

| æŒ‡æ ‡ | è¯´æ˜ |
|------|------|
| å•æ¡ç”Ÿæˆ (ops/s) | å•ä¸ª QRCode ç”Ÿæˆçš„ååé‡ |
| æ‰¹é‡ç”Ÿæˆ (ops/s) | æ‰¹é‡ QRCode ç”Ÿæˆçš„ååé‡ |
| å¹³å‡è€—æ—¶ (ms) | å•æ¬¡ç”Ÿæˆçš„å¹³å‡æ—¶é—´ |

## ä½¿ç”¨æ–¹æ³•

### 1. å®‰è£…ä¾èµ–

```bash
pnpm install
```

### 2. è¿è¡Œå®Œæ•´å¯¹æ¯”æµ‹è¯•

```bash
npm start
# æˆ–
pnpm run start
```

### 3. å•ç‹¬è¿è¡Œå„åç«¯æµ‹è¯•

**Node.js:**
```bash
cd ../qrcode-node
npm run benchmark
```

**Bun:**
```bash
cd ../qrcode-bun
bun run benchmark
```

**Rust:**
```bash
cd ../qrcode-rust
cargo bench
```

## æµ‹è¯•ç»“æœç¤ºä¾‹

```
======================================================================
ğŸ“Š è·¨åç«¯åŸºå‡†æµ‹è¯•å¯¹æ¯”ç»“æœ
â° 2024-01-31T12:00:00.000Z
======================================================================

ğŸŸ¢ Node.js
   ç‰ˆæœ¬: v20.10.0
   å•æ¡ç”Ÿæˆ: 45,230 ops/s
   æ‰¹é‡ç”Ÿæˆ: 120,500 ops/s
   å¹³å‡è€—æ—¶: 0.0221 ms

ğŸ¥Ÿ Bun
   ç‰ˆæœ¬: 1.0.25
   å•æ¡ç”Ÿæˆ: 52,100 ops/s
   æ‰¹é‡ç”Ÿæˆ: 145,800 ops/s
   å¹³å‡è€—æ—¶: 0.0192 ms

ğŸ¦€ Rust
   ç‰ˆæœ¬: native
   å•æ¡ç”Ÿæˆ: 185,000 ops/s
   æ‰¹é‡ç”Ÿæˆ: 520,000 ops/s
   å¹³å‡è€—æ—¶: 0.0054 ms

----------------------------------------------------------------------
ğŸ† å¯¹æ¯”ç»“æœ

å•æ¡ç”Ÿæˆ (ops/s):
      Node.js: 45,230
      Bun:     52,100
ğŸ†  Rust:    185,000
   èƒœå‡º: Rust

æ‰¹é‡ç”Ÿæˆ (ops/s):
      Node.js: 120,500
      Bun:     145,800
ğŸ†  Rust:    520,000
   èƒœå‡º: Rust

å¹³å‡è€—æ—¶ (ms):
      Node.js: 0.0221
      Bun:     0.0192
ğŸ†  Rust:    0.0054
   èƒœå‡º: Rust

======================================================================
```

## ç»“æœæ–‡ä»¶

æµ‹è¯•å®Œæˆåä¼šç”Ÿæˆ `cross_backend_result.json` æ–‡ä»¶ï¼ŒåŒ…å«è¯¦ç»†çš„æµ‹è¯•æ•°æ®ï¼š

```json
{
  "timestamp": "2024-01-31T12:00:00.000Z",
  "node": {
    "version": "v20.10.0",
    "singleOps": 45230,
    "batchOps": 120500,
    "avgTime": 0.0221
  },
  "bun": {
    "version": "1.0.25",
    "singleOps": 52100,
    "batchOps": 145800,
    "avgTime": 0.0192
  },
  "rust": {
    "version": "native",
    "singleOps": 185000,
    "batchOps": 520000,
    "avgTime": 0.0054
  },
  "comparison": [...]
}
```

## åœ¨ Benchmark.vue ä¸­æŸ¥çœ‹

å°†ç”Ÿæˆçš„ `cross_backend_result.json` å¤åˆ¶åˆ°é¡¹ç›®çš„ `public` ç›®å½•ï¼š

```bash
cp cross_backend_result.json ../../public/
```

ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ Benchmark é¡µé¢ï¼Œåˆ‡æ¢åˆ°"è·¨ç«¯å¯¹æ¯”"æ ‡ç­¾é¡µå³å¯æŸ¥çœ‹å¯è§†åŒ–ç»“æœã€‚

## æ³¨æ„äº‹é¡¹

1. è¿è¡Œæµ‹è¯•å‰è¯·ç¡®ä¿å„åç«¯åŒ…å·²æ­£ç¡®æ„å»º
2. å»ºè®®åœ¨ç›¸åŒç¡¬ä»¶ç¯å¢ƒä¸‹è¿›è¡Œå¯¹æ¯”æµ‹è¯•
3. å¤šæ¬¡è¿è¡Œå–å¹³å‡å€¼å¯è·å¾—æ›´ç¨³å®šçš„ç»“æœ
4. å†…å­˜æ•°æ®å¯èƒ½å›  GC æ—¶æœºè€Œæœ‰æ³¢åŠ¨

## License

MIT
